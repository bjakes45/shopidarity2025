{% extends "base.html" %}
{% block content %}
<div class="flex h-screen overflow-hidden">

  <!-- Sidebar Toggle Button -->
  <button id="sidebarToggle" 
    class="lg:hidden fixed top-20 left-4 z-70 bg-white border border-gray-300 shadow-md rounded-md p-2 hover:bg-gray-100 transition"
    aria-label="Toggle sidebar menu"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
    </svg>
  </button>

  <!-- Sidebar -->
  <aside id="sidebar"
    class="fixed lg:static z-40 inset-y-0 left-0 w-64 bg-gray-100 transform transition-transform duration-200 ease-in-out -translate-x-full lg:translate-x-0 overflow-y-auto p-4 text-sm sm:text-base">
    <h2 class="text-xl font-semibold mb-6">
      <a href="{{ url_for('dashboard') }}" class="text-blue-600 hover:underline">Back to My Dashboard</a>
    </h2>
    <nav class="flex flex-col gap-2">
      <a href="{{ url_for('dashboard_new_user') }}" class="text-blue-600 hover:underline">Manage Users</a>
    </nav>
  </aside>

  <!-- Overlay -->
  <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-30 top-[80px]" style="top:56px;"></div>

  <!-- Main Content -->
  <main class="flex-1 overflow-y-auto p-6 space-y-10 ml-0">
    {% block user_info %}{% endblock %}
  </main>
</div>

<script>
  const sidebar = document.getElementById('sidebar');
  const toggleBtn = document.getElementById('sidebarToggle');
  const overlay = document.getElementById('overlay');

  toggleBtn.addEventListener('click', () => {
    sidebar.classList.toggle('-translate-x-full');
    overlay.classList.toggle('hidden');
  });

  overlay.addEventListener('click', () => {
    sidebar.classList.add('-translate-x-full');
    overlay.classList.add('hidden');
  });
</script>
{% endblock %}
